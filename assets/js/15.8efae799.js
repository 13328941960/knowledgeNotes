(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{117:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"本地存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地存储"}},[t._v("#")]),t._v(" 本地存储")]),t._v(" "),s("p",[t._v("浏览器的本地存储主要分为"),s("code",[t._v("Cookie")]),t._v("、"),s("code",[t._v("WebStorage")]),t._v("和"),s("code",[t._v("IndexedDB")]),t._v(",\n其中"),s("code",[t._v("WebStorage")]),t._v("又可以分为"),s("code",[t._v("localStorage")]),t._v("和"),s("code",[t._v("sessionStorage")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),s("h3",{attrs:{id:"起源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#起源"}},[t._v("#")]),t._v(" 起源")]),t._v(" "),s("p",[t._v("Cookie 起初被设计出来是为了弥补HTTP在状态管理上的不足的。\nHTTP 协议是一个无状态协议，客户端向服务器发请求，服务器返回响应，故事就这样结束了，但是下次发请求如何让服务端知道客户端是谁呢？\n这种背景下，就产生了 Cookie.")]),t._v(" "),s("h3",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),s("p",[t._v("HTTP Cookie(Web Cookie 或 浏览器Cookie) 是服务器发送到用户浏览器并保存在本地的一块数据。\n它会在浏览器下次向同一服务发送请求时被携带发送给服务器，服务器便会得知是来至同一个浏览器发来的请求。")]),t._v(" "),s("h3",{attrs:{id:"作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）")])]),t._v(" "),s("li",[s("p",[t._v("个性化设置（如用户自定义设置、主题等）")])]),t._v(" "),s("li",[s("p",[t._v("浏览器行为跟踪（如跟踪分析用户行为等）")])])]),t._v(" "),s("h3",{attrs:{id:"缺陷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缺陷"}},[t._v("#")]),t._v(" 缺陷")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("容量缺陷：Cookie的只能存储"),s("code",[t._v("4k")]),t._v("信息")])]),t._v(" "),s("li",[s("p",[t._v("性能缺陷：Cookie 紧跟域名，不管域名下面的某一个地址需不需要这个 Cookie ，请求都会携带上完整的 Cookie，这样随着请求数的增多，其实会造成巨大的性能浪费的，因为请求携带了很多不必要的内容。")])]),t._v(" "),s("li",[s("p",[t._v("安全缺陷：cookie以纯文本的形式在浏览器和服务器之间传递，很容易被非法用户截取，进行一些了不法操作。另外，在HttpOnly为 false 的情况下，Cookie 信息能直接通过 JS 脚本来读取。")])])]),t._v(" "),s("h2",{attrs:{id:"localstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[t._v("#")]),t._v(" localStorage")]),t._v(" "),s("p",[t._v("localStorage用来作为本地存储来使用的，解决了cookie不足的问题。")]),t._v(" "),s("h3",{attrs:{id:"特征"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特征"}},[t._v("#")]),t._v(" 特征")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("localStorage同一个域名下，会存储相同的一段localStorage。")])]),t._v(" "),s("li",[s("p",[t._v("localStorage 的容量上限为5M")])]),t._v(" "),s("li",[s("p",[t._v("只存在客户端，这样就很好地避免了 Cookie 带来的性能问题和安全问题。")])])]),t._v(" "),s("h3",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),s("p",[t._v("设置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wzx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlocalStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wzx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nlocalStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"info"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("p",[t._v("获取")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" info "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"info"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"sessionstorage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[t._v("#")]),t._v(" sessionStorage")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("容量上限也为 5M。")])]),t._v(" "),s("li",[s("p",[t._v("只存在客户端，默认不参与与服务端的通信。")])]),t._v(" "),s("li",[s("p",[t._v("接口封装。除了sessionStorage名字有所变化，存储方式、操作方式均和localStorage一样。")])])]),t._v(" "),s("p",[t._v("sessionStorage 和 localStorage 本质的区别是："),s("code",[t._v("sessionStorage")]),t._v("是会话级的，即关闭页面后储存的数据也随之消失。")]),t._v(" "),s("h2",{attrs:{id:"indexeddb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#indexeddb"}},[t._v("#")]),t._v(" IndexedDB")]),t._v(" "),s("p",[t._v("IndexedDB是运行在浏览器中的非关系型数据库, 本质上是数据库，理论上容量没有上限。")]),t._v(" "),s("h3",{attrs:{id:"特性："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性："}},[t._v("#")]),t._v(" 特性：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("拥有数据库本身的特性;")])]),t._v(" "),s("li",[s("p",[t._v("支持事务;")])]),t._v(" "),s("li",[s("p",[t._v("存储二进制数据;")])]),t._v(" "),s("li",[s("p",[t._v("还有这样一些特性需要格外注意：")]),t._v(" "),s("p",[t._v("(1)键值对存储。内部采用对象仓库存放数据，在这个对象仓库中数据采用键值对的方式来存储。")]),t._v(" "),s("p",[t._v("(2)异步操作。数据库的读写属于 I/O 操作, 浏览器中对异步 I/O 提供了支持。")]),t._v(" "),s("p",[t._v("(3)受同源策略限制，即无法访问跨域的数据库。")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);